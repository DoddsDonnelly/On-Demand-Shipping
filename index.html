<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="stylesheets\minify\jcSkin.min.css">
    <title>On Demand Shipping Widget</title>
</head>
<body class="a4-color" style="height:100%; width:100%">
    <div class="LeftFourPane">
        <div class="radius10 level1 demo">
            <div class="notification radius30 a1-color level1"><p class="whiteText thick dsCount"></p></div>
            <div class="m1-color tRadius10">
                <h3 class="pad2 whiteText">On Demand Shipping 3</h3>
            </div>
            <div class="l1-color bRadius10">
                <div id="onDShipping">
                </div>
                <p></p>
            </div>
        </div>
    </div>
    <div id="id01"></div>
</body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
<script src="scripts\jquery.details.min.js"></script>
<script>

    // json data pull
    var xmlhttp = new XMLHttpRequest();
    var url = "data/onDemandShip.txt";

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var myArr = JSON.parse(xmlhttp.responseText);
            myFunction(myArr);
        }
    }

    xmlhttp.open("GET", url, true);
    xmlhttp.send();

    function myFunction(arr) {
        var out = "";
        var i;
        for (i = 0; i < arr.length; i++) {
            out += '<details><summary class="dsArrow"><section class="pad2 "><a href="" class="fa fa-pencil dsIcon"></a><a href="" class="fa fa-truck dsIcon"></a><p class="thick dsCompanyName">' + arr[i].companyName
                + '</p><span class="thick dsProductNumber accentText">' + arr[i].product.number
                + '</span><div class="clr"></div></section></summary><div class="l2-color"><div class="chevron"><img class="element" src="images/chevron.png" /><p class="m-font thick overlayContent">' + arr[i].quantity
                + '</p></div><section class="dsText"><p class="thicker dsProductTitle">' + arr[i].product.name
            + '</p><p><span class="thick">Fabric: </span>' + arr[i].fabric.name
            + ' ' + arr[i].fabric.color
            + '</p><p><span class="thick">Art: </span>' + arr[i].art
            + '</p></section><div class="clr"></div></div></details>';
        }

    }

    // detail support IE
    $(function () {

        // Add conditional class name based on support
        $('#onDShipping').addClass($.fn.details.support ? 'details' : 'no-details');

        // Emulate <details> where necessary and enable open/close event handlers
        $('details').details();

        // Bind some example event handlers
        $('details').on({
            'open.details': function () {
                console.log('opened');
            },
            'close.details': function () {
                console.log('closed');
            }
        });

        // Notification count
        $('.dsCount').prepend($('#onDShipping details').length)
    });
</script> 